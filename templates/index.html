<!DOCTYPE html>
<html>
<head>
    <title>AI Poem Generator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='/styles.css') }}">
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
    </style>
</head>
<body>
    <h1>Let's write a poem:</h1>
    <form method="POST" enctype="multipart/form-data"> 
        <input type="text" name="text_input" placeholder="Describe your inspiration..." style="width: 300px;">
        <input type="file" name="image_input" accept="image/*"> 
        <button type="button" id="previewButton">Preview Image</button> <div id="imagePreview"></div> <button type="submit">Generate Poem</button>
    </form>

    <div id="loading" style="display: none;"> 
        Generating your poem... 
    </div>

    {% if poem %}
        <h2>Your Poem:</h2>
        <p>{{ poem }}</p>
    {% elif error %}
        <p style="color: red;">{{ error }}</p>
    {% endif %}

    <script>
        const form = document.querySelector('form');
        const loadingIndicator = document.getElementById('loading');

        form.addEventListener('submit', () => {
            loadingIndicator.style.display = 'block'; 
        });

        // Image preview functionality
        const previewButton = document.getElementById('previewButton');
        const imagePreview = document.getElementById('imagePreview');
        const imageInput = document.getElementById('image_input');

        previewButton.addEventListener('click', () => {
          const file = imageInput.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (event) {
              imagePreview.innerHTML = `<img src="${event.target.result}" width="200px" />`;
            };
            reader.readAsDataURL(file);
          }
        });

    </script>
</body>
</html>